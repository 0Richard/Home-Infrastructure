# =============================================================================
# NSA Server - Mosquitto MQTT Broker Configuration
# =============================================================================
# Purpose: MQTT message broker for IoT devices
# Location: /srv/docker/mosquitto/config/mosquitto.conf
#
# Used by: Zigbee2MQTT â†’ Home Assistant
# Port: 1883
# =============================================================================

# Listen on port 1883 (standard MQTT)
listener 1883

# Require authentication
allow_anonymous false
password_file /mosquitto/config/password.txt

# Persistence (retain messages across restarts)
persistence true
persistence_location /mosquitto/data/

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_type error
log_type warning
log_type notice

# =============================================================================
# Password file creation:
# docker run --rm -v /srv/docker/mosquitto/config:/mosquitto/config \
#   eclipse-mosquitto mosquitto_passwd -b -c \
#   /mosquitto/config/password.txt mqtt-user password
# =============================================================================
